---
layout: post
title:  "tcpUdp进程&&端口"
date:   2014-06-13
categories: 
- Notes 
tags:
- 计算机系统
---

一是兴起，想探讨几个问题。

**1**.tcp udp传输协议可否使用相同的port?

当然可以。
按照OSI七层协议的描述，传输层与网络层在功能上的最大区别是传输层提供进程通信能力。从这个意义上讲，网络通信的最终地址就不仅仅是主机地址了，还包括可以描述进程的某种标识符。为此，TCP/IP协议提出了协议端口（protocolport，简称端口）的概念，用于标识通信的进程。 

端口是一种抽象的软件结构（包括一些数据结构和I/O缓冲区）。应用程序（即进程）通过系统调用与某端口建立连接（binding）后，传输层传给该端口的数据都被相应进程所接收，相应进程发给传输层的数据都通过该端口输出。
在TCP/IP协议的实现中，端口操作类似于一般的I/O操作，进程获取一个端口，相当于获取本地唯一的I/O文件，可以用一般的读写原语访问之
     
类似于文件描述符，每个端口都拥有一个叫端口号（portnumber）的整数型标识符，用于区别不同端口。由于TCP/IP传输层的两个协议TCP和UDP是完全独立的两个软件模块，因此各自的端口号也相互独立，如TCP有一个255号端口，UDP也可以有一个255号端口，二者并不冲突。 
      
      
**2**.多个进程能否使用同一个port？怎么做？

我认为是可以的。在tcp udp传输报文的头部里面最重要的信息应该是（srcIP,port）（desIp,port）这个4个元素以及所使用的传输协议tcp OR udp，这5个属性确定了了一个完整的数据传输。。。。只要有一项不同就可以正常进行数据通信。具体一点的话应该是，一个机器上的多个进程同时监听这一个相同的port，然后依据某一个连接请求和相应的进程建立连接通信（udp就不用建立连接了），不满足要求的其他进程则回去睡觉，应该会涉及到队列和加锁的问题。所以可以认为，在某一个时刻最多只能有一个进程在使用这个port进行数据通信。

欢迎交流指正，谢谢。

