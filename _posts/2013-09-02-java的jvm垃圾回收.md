---
layout: post
title:  "-java的jvm垃圾回收"
date:   2013-09-02
categories: 
- Notes 
tags:
- Java
---

Ok,在这里我们所要关心的是以下几点：**GC是在什么时候，对什么东西，做了什么事情？**
**首先推荐一本书《深入理解java虚拟机》**
##什么时候##
1.**系统空闲的时候**。不够完善
2.**系统自身决定，不可预测的时间/调用System.gc()的时候。**
3. **说出新生代、老年代结构，能提出minor gc/full gc**
4.能说明minor gc/full gc的触发条件、OOM的触发条件，降低GC的调优的策略。

##对什么东西？##

   **1.不使用的对象。**
    分析：相当于没有回答，问题就是在问什么对象才是“不使用的对象”。大约占30%。
   **2.超出作用域的对象/引用计数为空的对象。**
    分析：这2个回答站了60%，相当高的比例，估计学校教java的时候老师就是这样教的。第一个回答没有解决我的疑问，gc到底怎么判断哪些对象在不在作用域的？至于引用计数来判断对象是否可收集的，我可以会补充一个下面这个例子让面试者分析一下obj1、obj2是否会被GC掉？
    class C{
         public Object x;
    }
    C obj1、obj2 = new C();
    obj1.x = obj2;
    obj2.x = obj1;
    obj1、obj2 = null;

    **3.从gc root开始搜索，搜索不到的对象。**

    **4.从root搜索不到，而且经过第一次标记、清理后，仍然没有复活的对象。**
    
总结：超出了作用域或引用计数为空的对象；从gc root开始搜索找不到的对象，而且经过一次标记、清理，仍然没有复活的对象。

##做什么？##

**1.删除不使用的对象，腾出内存空间。**
    
**2.补充一些诸如停止其他线程执行、运行finalize等的说明。**
  参考http://jeromecen1021.blog.163.com/blog/static/18851527120117274624888/
